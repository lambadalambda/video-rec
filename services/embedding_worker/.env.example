# Used by `docker compose` in this folder (copy to `.env`).
#
# Usage:
#   cd services/embedding_worker
#   cp .env.example .env
#   docker compose up -d

# GHCR image published by GitHub Actions (edit OWNER)
EMBEDDING_WORKER_IMAGE=ghcr.io/OWNER/video-suggestion-embedding-worker:latest

# Qwen3-VL
EMBEDDING_BACKEND=qwen3_vl
QWEN3_VL_MODEL=Qwen/Qwen3-VL-Embedding-8B

# Quantization (CUDA only): none | int8 | int4
QWEN_QUANTIZATION=int8
QWEN_DEVICE=cuda
QWEN_MAX_LENGTH=8192

# Microbatching (better GPU utilization)
QWEN_BATCH_MAX_SIZE=8
QWEN_BATCH_WAIT_MS=20

# Frame sampling
QWEN_VIDEO_TARGET_FRAMES=10
QWEN_VIDEO_MAX_FRAMES=64
QWEN_VIDEO_FPS=1.0

# Output dims (truncate + re-normalize)
EMBEDDING_DIMS=512

# Whisper (optional)
TRANSCRIBE_ENABLED=1
WHISPER_BACKEND=transformers
WHISPER_MODEL=distil-whisper/distil-large-v3
WHISPER_DEVICE=auto

